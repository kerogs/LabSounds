<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>LabSounds</title>

	<link rel="stylesheet" href="src/assets/fonts/chillax.css">
	<link rel="stylesheet" href="dist/style.css">

	<!-- <script src="../node_modules/@splidejs/splide/dist/js/splide.min.js"></script>
	<link rel="stylesheet" href="../node_modules/@splidejs/splide/dist/css/splide-core.min.css"> -->

</head>

<body>

	<main>
		<iframe src="pages/for-you.html" frameborder="0" id="indexTopContent">

		</iframe>
		<div class="bottom" id="musicPlayArea">

			<!-- player -->
			<div class="progress">
				<div></div>
			</div>

			<div class="contentFlex">
				<div class="player">
					<div class="left">
						<img src="https://placewaifu.com/image/200" alt="">
					</div>
					<div class="right">
						<p class="name">
							CyberBornFat Music Kit [Counter Strike 2] [Remix] [BOOTLEG]
						</p>
					</div>
				</div>
				<div class="playerBtns">

					<button onclick="randomPlay()" id="randomPlay">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<g fill="none">
								<path stroke="currentColor" stroke-width="2"
									d="M3 7h1.78c2.152 0 3.228 0 4.1.456a4 4 0 0 1 1.005.749c.688.703.997 1.734 1.615 3.795s.928 3.092 1.615 3.795c.294.301.633.554 1.006.749c.871.456 1.947.456 4.1.456H21m0 0l-3-3m3 3l-3 3" />
								<path fill="currentColor" fill-rule="evenodd"
									d="m21.707 6.293l-3-3l-1.414 1.414L18.586 6h-.411c-1.038 0-1.881 0-2.573.06c-.717.064-1.349.198-1.945.51a5 5 0 0 0-1.21.888c.241.393.43.8.594 1.21q.169.426.332.923a2.5 2.5 0 0 1 .457-.688a3 3 0 0 1 .755-.56c.275-.145.617-.239 1.193-.29C16.371 8.001 17.127 8 18.22 8h.366l-1.293 1.293l1.414 1.414l3-3L22.414 7zm-11.154 10.25a8 8 0 0 1-.594-1.21a16 16 0 0 1-.332-.924a2.5 2.5 0 0 1-.457.688a3 3 0 0 1-.755.56c-.275.145-.617.24-1.193.29c-.593.052-1.349.053-2.442.053H3v2h1.825c1.038 0 1.881 0 2.572-.06c.718-.064 1.35-.198 1.946-.51a5 5 0 0 0 1.21-.888"
									clip-rule="evenodd" />
							</g>
						</svg>
					</button>

					<button onclick="musicPrev()" id="musicPrev">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
								stroke-width="1.5"
								d="M3.889 3.7v16.6m16.222-1.676V5.38a1.455 1.455 0 0 0-2.343-1.15L8.6 11.363a1.456 1.456 0 0 0 .087 2.357l9.169 6.113a1.456 1.456 0 0 0 2.255-1.208" />
						</svg>
					</button>

					<button onclick="playPause()" id="playPause">
						<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
							<path fill="currentColor" d="M14 10h-2v12h2zm6 0h-2v12h2z" />
							<path fill="currentColor"
								d="M16 4A12 12 0 1 1 4 16A12 12 0 0 1 16 4m0-2a14 14 0 1 0 14 14A14 14 0 0 0 16 2" />
						</svg>
					</button>

					<button onclick="musicNext()" id="musicNext">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
							<path fill="currentColor"
								d="M14 2.5a.5.5 0 1 0-1 0v11a.5.5 0 0 0 1 0zM2 3.002a1 1 0 0 1 1.579-.816l7 4.963a1 1 0 0 1 .006 1.628l-7 5.037A1 1 0 0 1 2 13.003zm8 4.963L3 3.002v10z" />
						</svg>
					</button>

					<button onclick="musicRepeat()" id="musicRepeat">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path fill="currentColor"
								d="M17.65 6.35A7.96 7.96 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z" />
						</svg>
					</button>
				</div>
			</div>
		</div>
	</main>

</body>
<script>
	function setCookie(name, value, days) {
		const expires = new Date();
		expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000); // Convertir les jours en millisecondes
		document.cookie = `${name}=${encodeURIComponent(value)};expires=${expires.toUTCString()};path=/`;
	}

	// Fonction pour modifier un cookie (identique à la création, car on écrase l'ancien avec le nouveau)
	function modifyCookie(name, value, days) {
		setCookie(name, value, days); // Réutilisation de setCookie
	}

	// Fonction pour supprimer un cookie
	function deleteCookie(name) {
		document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/`; // Date d'expiration passée
	}

	function getCookie(name) {
		const cookies = document.cookie.split(';'); // Sépare tous les cookies
		for (let cookie of cookies) {
			cookie = cookie.trim(); // Supprime les espaces inutiles
			if (cookie.startsWith(`${name}=`)) {
				return decodeURIComponent(cookie.split('=')[1]); // Retourne la valeur décodée
			}
		}
		return null; // Retourne null si le cookie n'existe pas
	}
</script>

<script>
	// ! theme
	if (getCookie('mode') === 'dark') {
		document.querySelector('html').setAttribute('data-theme', 'default_dark');
	} else {
		document.querySelector('html').setAttribute('data-theme', 'default_light');
	}
	console.log("Theme mode: " + getCookie('mode'));

	// ! interaction
	window.onmessage = function (e) {
		const kstp = e.data;

		if (kstp.header == 'themeChange') {
			if (kstp.data.theme == 'dark') {
				document.querySelector('html').setAttribute('data-theme', 'default_dark');
			}
			if (kstp.data.theme == 'light') {
				document.querySelector('html').setAttribute('data-theme', 'default_light');
			}
		}

		if(kstp.header == "musicChange"){
			if(kstp.data.action == "newPlay"){

				let musicPlayArea = document.getElementById("musicPlayArea");
				if(musicPlayArea){
					// check if not .active
					if(!musicPlayArea.classList.contains("active")){
						musicPlayArea.classList.add("active");
						document.querySelector('main').classList.add("active");
						console.log("ID GET FROM KSTP : "+kstp.data.id)
					}
				}

			}
		}
	};
</script>

</html>